---
title: "A2A Protocol"
description: "Agent-to-Agent protocol support for agent discovery and communication"
---

## Overview

The A2A (Agent-to-Agent) protocol enables standardized agent discovery and inter-agent communication. aixyz implements A2A with an agent card for discovery and a JSON-RPC endpoint for task execution.

## Endpoints

| Endpoint                       | Method | Description                                                  |
| ------------------------------ | ------ | ------------------------------------------------------------ |
| `/.well-known/agent-card.json` | GET    | Agent discovery card with metadata, skills, and capabilities |
| `/agent`                       | POST   | JSON-RPC endpoint for sending tasks to the agent             |

## Using the A2A Adapter

The `useA2A` function wires up both endpoints on your server:

```typescript
import { useA2A } from "aixyz/server/adapters/a2a";

useA2A(server, agent);
```

This registers:

- A **GET** handler at `/.well-known/agent-card.json` that serves the agent card generated from your `aixyz.config.ts`
- A **POST** handler at `/agent` that accepts JSON-RPC requests and routes them to your agent executor

## Agent Card

The agent card is automatically generated from your config and includes agent metadata, supported skills, and endpoint URLs. Other agents and clients use this card for discovery.

```bash
curl http://localhost:3000/.well-known/agent-card.json
```

## JSON-RPC Endpoint

The `/agent` endpoint accepts JSON-RPC 2.0 requests. The primary method is `tasks/send`:

```bash
curl -X POST http://localhost:3000/agent \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "tasks/send",
    "id": "1",
    "params": {
      "id": "task-1",
      "message": {
        "role": "user",
        "parts": [{"type": "text", "text": "What is the weather in NYC?"}]
      }
    }
  }'
```

## Payment Integration

When an agent has an `accepts` export, the `/agent` endpoint is gated behind x402 payment. Clients must include a valid payment header to access the endpoint. Agents without `accepts` are served without payment requirements.

<CardGroup cols={2}>
  <Card title="x402 Payments" icon="credit-card" href="/protocols/x402">
    How payment gating works on A2A endpoints.
  </Card>
  <Card title="MCP Protocol" icon="puzzle-piece" href="/protocols/mcp">
    Expose tools via MCP alongside A2A.
  </Card>
</CardGroup>
