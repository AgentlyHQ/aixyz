---
title: "@aixyz/stripe"
description: "Experimental Stripe payment adapter"
---

## Overview

The `@aixyz/stripe` package provides an experimental Stripe payment adapter for aixyz agents. It creates Stripe PaymentIntents for agent interactions, offering an alternative payment method alongside the default [x402 protocol](/protocols/x402).

<Warning>
  This package is **experimental** and its API may change significantly in future releases. Use in production at your
  own risk.
</Warning>

## Installation

```bash
bun add @aixyz/stripe
```

## Environment Variables

| Variable             | Description                     |
| -------------------- | ------------------------------- |
| `STRIPE_SECRET_KEY`  | Your Stripe secret key          |
| `STRIPE_PRICE_CENTS` | Price in cents (default: `100`) |

## Usage

Use `experimental_useStripePaymentIntent` in a [custom server](/guides/custom-server) to add Stripe payment endpoints:

```typescript
import { AixyzServer } from "aixyz/server";
import { experimental_useStripePaymentIntent } from "@aixyz/stripe";

const server = new AixyzServer();
await server.initialize();

experimental_useStripePaymentIntent(server);

export default server;
```

This registers a `POST /stripe/create-payment-intent` endpoint and middleware for validating Stripe payments.

## Example: Travel Agent with Stripe

The `agent-travel` example demonstrates Stripe integration alongside x402:

```typescript
import { AixyzMCP } from "aixyz/server/adapters/mcp";
import { AixyzServer } from "aixyz/server";
import { useA2A } from "aixyz/server/adapters/a2a";
import { experimental_useStripePaymentIntent } from "@aixyz/stripe";

import * as agent from "./agent";
import * as searchFlights from "./tools/searchFlights";

const server = new AixyzServer();
await server.initialize();
server.unstable_withIndexPage();

experimental_useStripePaymentIntent(server);
useA2A(server, agent);

const mcp = new AixyzMCP(server);
await mcp.register("searchFlights", searchFlights);
await mcp.connect();

export default server;
```

## Relationship to x402

The x402 protocol is the primary payment mechanism in aixyz, built into the server at the framework level. The Stripe adapter is a supplementary option for teams that prefer traditional payment processing over crypto-native x402 payments.

<CardGroup cols={2}>
  <Card title="x402 Payments" icon="credit-card" href="/protocols/x402">
    The primary payment protocol in aixyz.
  </Card>
  <Card title="Custom Server" icon="server" href="/guides/custom-server">
    Set up Stripe in a custom server.
  </Card>
</CardGroup>
