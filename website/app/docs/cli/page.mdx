# CLI

## `aixyz dev`

Local dev server with hot reload.

```bash
aixyz dev            # port 3000
aixyz dev -p 4000    # custom port
```

Watches `app/` and `aixyz.config.ts`. Auto-generates server from `app/agent.ts` + `app/tools/` unless `app/server.ts` exists.

## `aixyz build`

Bundle your agent for deployment.

**Default behavior:** Single file bundle for Bun Runtime at `./.aixyz/output/server.js`

```bash
aixyz build
bun .aixyz/output/server.js
```

**With --vercel flag or VERCEL=1:** Build Output API v3 for Vercel deployment at `.vercel/output/`

```bash
aixyz build --vercel
vercel deploy
```

The `VERCEL=1` environment variable is automatically set by Vercel during builds, so the correct build mode is automatically selected.

Build steps:

1. Validates `aixyz.config.ts` (baked into bundle)
2. Detects entrypoint (`app/server.ts` or auto-generates)
3. Bundles with `Bun.build()` targeting Bun Runtime
4. Copies `public/` and `app/icon.png` as static assets

**Output:**

- Default: `.aixyz/output/server.js` (standalone executable)
- Vercel: `.vercel/output/` ([Build Output API v3](https://vercel.com/docs/build-output-api/v3))

## `agently-cli register`

Register agent on ERC-8004 IdentityRegistry.

```bash
agently-cli register --chain base-sepolia --broadcast
```

| Flag          | Description                                       |
| ------------- | ------------------------------------------------- |
| `--uri`       | Metadata URI or local JSON file path              |
| `--chain`     | `mainnet`, `sepolia`, `base-sepolia`, `localhost` |
| `--rpc-url`   | Custom RPC endpoint                               |
| `--keystore`  | Encrypted keystore file                           |
| `--browser`   | Use browser wallet (EIP-6963)                     |
| `--broadcast` | Send transaction (default is dry-run)             |

## `agently-cli set-agent-uri`

Update metadata URI for a registered agent.

```bash
agently-cli set-agent-uri --agent-id 1 --uri "https://my-agent.vercel.app/.well-known/agent-card.json" --broadcast
```
